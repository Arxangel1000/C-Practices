
using System;
using System.Linq;

class ExtMethods
{
    static void Main(string[] args)
    {
        int[] nums = { 1, -2, 3, 0, -4, 5 };
        // Сформировать запрос на получение количества
        // положительных значений в массиве nums.
        int len = (from n in nums
                   where n > 0
                   select n).Count();
        Console.WriteLine("Количество положительных значений в массиве nums: " +
            len);

//ТЕОРИЯ

        //        Обратите внимание на то, что цикл foreach не указан в данной программе явным
        //образом.Вместо этого запрос выполняется автоматически благодаря вызову метода
        //расширения Count().
        //Любопытно, что запрос из приведенной выше программы можно было бы сформировать
        //и следующим образом.
        
        //var posNums = from n in nums
        //              where n > 0
        //              select n;
        //        int len = posNums.Count(); 


//В данном случае метод Count() вызывается для переменной запроса. И в этот момент
//запрос выполняется для получения подсчитанного количества.
//К числу других методов расширения, вызывающих немедленное выполнение запроса,
//относятся методы ТоАrray() и ToList(). Оба этих метода расширения определены
//в классе Enumerable.
        
//Метод ToArray() возвращает результаты запроса в массиве,
//а метод ToList() — результаты запроса в форме коллекции List. В обоих случаях для получения результатов выполняется
//запрос.Например, в следующем фрагменте кода сначала получается массив
//результатов, сформированных по приведенному выше запросу в переменной posNums,
//а затем эти результаты выводятся на экран.

//int[] pnums = posNum.ТоАrrау(); // запрос выполняется здесь
//        foreach (int i in pnums)
//            Console.Write(i + " ");
//    }

}
}
